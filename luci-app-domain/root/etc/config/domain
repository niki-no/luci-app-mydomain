# DOMAIN Configuration
# Copyright (c) 2026 DOMAIN Maintainers
# Licensed under the Apache License 2.0

# 全局 DOMAIN 配置
config domain 'global'
    option enabled '1'
    option version '1.0.0'
    option auto_update '0'
    option update_channel 'stable'
    option log_level 'info'
    option data_dir '/etc/domain'
    option backup_dir '/etc/domain/backup'
    option max_backups '10'

# Web 界面设置
config ui 'web'
    option theme 'light'
    option language 'auto'
    option refresh_interval '30'
    option show_notifications '1'
    option animation '1'
    option compact_mode '0'

# 证书管理
config certificate 'settings'
    option auto_renew '1'
    option renew_threshold '30'
    option staging '0'
    option acme_server 'https://acme-v02.api.letsencrypt.org/directory'
    option acme_email ''
    option key_type 'ec-256'
    option key_length '2048'
    option challenge_type 'http-01'
    option dns_provider ''
    option dns_api_token ''
    option ocsp_stapling '1'
    option hsts '1'

# DNS 配置
config dns 'settings'
    option enabled '1'
    option provider 'auto'
    option cache_size '10000'
    option cache_ttl '300'
    option prefetch '1'
    option min_ttl '60'
    option max_ttl '86400'
    option bogus_nxdomain ''
    option rebind_protection '1'
    option domain_whitelist ''
    option local_ttl '60'

# 代理设置
config proxy 'main'
    option enabled '1'
    option mode 'transparent'
    option listen_addr '0.0.0.0'
    option listen_port '8080'
    option transparent_port '3128'
    option ssl_intercept '1'
    option ssl_cert_path '/etc/domain/certs'
    option max_connections '1000'
    option cache_size '100'
    option cache_ttl '3600'
    option upstream_dns '8.8.8.8,8.8.4.4'
    option bypass_local '1'

# 过滤规则
config filtering 'rules'
    option enabled '1'
    option block_ads '1'
    option block_trackers '1'
    option block_malware '1'
    option block_phishing '1'
    option block_gambling '0'
    option block_porn '0'
    option block_social '0'
    option block_video '0'
    option safe_search '1'
    option youtube_restricted '0'
    option custom_rules ''

# 访问控制
config access 'control'
    option enabled '1'
    option mode 'blacklist'
    list blacklist ''
    list whitelist ''
    option schedule_enabled '0'
    option schedule_start ''
    option schedule_end ''
    option schedule_days ''
    option max_devices '50'
    option guest_network '0'
    option guest_ssid ''
    option guest_password ''

# 家长控制
config parental 'control'
    option enabled '0'
    option safe_search '1'
    option youtube_restricted '1'
    option block_categories ''
    option allow_categories ''
    option time_limits ''
    option bedtime_start '22:00'
    option bedtime_end '07:00'
    option max_daily_time '120'
    option pause_until ''

# DDNS 配置
config ddns 'service'
    option enabled '0'
    option provider 'domain'
    option domain ''
    option username ''
    option password ''
    option api_token ''
    option check_interval '300'
    option force_ipv6 '0'
    option ip_method 'auto'
    option record_type 'auto'
    option last_ip ''
    option last_update ''
    option notify_enabled '0'
    option notify_method 'email'
    option notify_email ''
    option wait_propagation '0'

    # Cloudflare 特定设置
    option cloudflare_zone_id ''
    option cloudflare_api_token ''

    # AWS Route53 特定设置
    option aws_access_key ''
    option aws_secret_key ''
    option aws_hosted_zone_id ''

    # 自定义提供商
    option custom_script ''

# 统计和监控
config stats 'monitoring'
    option enabled '1'
    option keep_days '30'
    option detailed_stats '1'
    option bandwidth_stats '1'
    option dns_stats '1'
    option filter_stats '1'
    option device_stats '1'
    option privacy_mode '0'
    option auto_cleanup '1'

# 网络设置
config network 'settings'
    option lan_interface 'br-lan'
    option wan_interface 'wan'
    option dns_port '53'
    option dhcp_enabled '1'
    option dhcp_start '100'
    option dhcp_limit '150'
    option dhcp_leasetime '12h'
    option ipv6_enabled '1'
    option mtu '1500'
    option mss_clamping '1'

# 安全设置
config security 'settings'
    option enable_firewall '1'
    option block_wan_access '1'
    option rate_limit '1'
    option rate_limit_count '100'
    option rate_limit_period '60'
    option block_icmp '0'
    option block_syn_flood '1'
    option block_port_scan '1'
    option block_bruteforce '1'
    option fail2ban_enabled '1'
    option fail2ban_maxretry '5'
    option fail2ban_bantime '3600'

# 高级设置
config advanced 'settings'
    option debug_mode '0'
    option syslog_enabled '1'
    option memory_limit '256'
    option worker_processes 'auto'
    option keepalive_timeout '65'
    option client_max_body_size '100M'
    option proxy_buffer_size '4k'
    option proxy_buffers '8 4k'
    option dnssec_enabled '1'
    option dnscrypt_enabled '0'
    option doh_enabled '0'
    option dot_enabled '0'

# 自动更新配置
config autoupdate 'settings'
    option enabled '1'
    option channel 'stable'
    option check_interval '86400'
    option auto_install '0'
    option backup_before_update '1'
    option notify_on_update '1'
    option last_check ''
    option last_update ''
    option next_check ''

# 备份配置
config backup 'settings'
    option enabled '1'
    option auto_backup '1'
    option backup_interval '604800'
    option keep_backups '10'
    option backup_location '/etc/domain/backup'
    option include_certs '1'
    option include_config '1'
    option include_logs '0'
    option include_stats '1'
    option encrypt_backup '0'
    option backup_password ''
    option last_backup ''

# 自定义 DNS 记录 (覆盖)
config dns_record 'custom'
    option enabled '0'
    option name 'example.com'
    option type 'A'
    option value '192.168.1.100'
    option ttl '300'

# 端口转发规则
config port_forward 'rule'
    option enabled '0'
    option name 'Web Server'
    option proto 'tcp'
    option ext_port '80'
    option int_port '80'
    option int_ip '192.168.1.100'
    option dest_ip ''
    option dest_port ''

# VPN 设置 (如果适用)
config vpn 'settings'
    option enabled '0'
    option type 'wireguard'
    option server ''
    option port '51820'
    option username ''
    option password ''
    option private_key ''
    option public_key ''
    option allowed_ips '0.0.0.0/0'
    option dns '1.1.1.1'
    option mtu '1420'
    option persistent_keepalive '25'

# 自定义脚本
config script 'custom'
    option enabled '0'
    option name 'Custom Script'
    option type 'shell'
    option script ''
    option trigger 'manual'
    option schedule ''
    option timeout '30'

# 通知设置
config notification 'settings'
    option enabled '0'
    option method 'email'
    option email ''
    option smtp_server ''
    option smtp_port '587'
    option smtp_user ''
    option smtp_password ''
    option smtp_tls '1'
    
    # Telegram
    option telegram_enabled '0'
    option telegram_bot_token ''
    option telegram_chat_id ''
    
    # Webhook
    option webhook_enabled '0'
    option webhook_url ''
    option webhook_method 'POST'
    
    # 通知事件
    option notify_cert_expiry '1'
    option notify_cert_renewal '1'
    option notify_ddns_update '1'
    option notify_filter_update '1'
    option notify_system_update '1'
    option notify_errors '1'
    option notify_warnings '0'

# 计划任务
config schedule 'task'
    option enabled '0'
    option name 'Daily Reboot'
    option type 'reboot'
    option schedule '0 4 * * *'
    option last_run ''
    option next_run ''

# 自定义主题
config theme 'custom'
    option enabled '0'
    option name 'Custom Theme'
    option primary_color '#3498db'
    option secondary_color '#2ecc71'
    option background_color '#f8f9fa'
    option text_color '#333333'
    option font_family 'system-ui'
    option rounded_corners '1'
    option shadow_effects '1'

# API 设置
config api 'settings'
    option enabled '1'
    option listen_addr '127.0.0.1'
    option listen_port '8081'
    option auth_enabled '1'
    option auth_token ''
    option cors_enabled '1'
    option rate_limit '100'
    option rate_period '60'
    option log_requests '1'
    option log_responses '0'

# 设备配置文件
config device_profile 'default'
    option name 'Default Profile'
    option filtering_level 'standard'
    option schedule_enabled '0'
    option time_limit '0'
    option bedtime_enabled '0'
    option bandwidth_limit '0'
    option category_restrictions ''
    option safe_search '1'

# 内容过滤类别
config filter_category 'advertising'
    option enabled '1'
    option name 'Advertising'
    option description 'Blocks advertisements and trackers'
    list domains ''
    list urls ''

config filter_category 'social_media'
    option enabled '0'
    option name 'Social Media'
    option description 'Blocks social media platforms'
    list domains 'facebook.com,twitter.com,instagram.com'
    list urls ''

# 自定义阻止/允许列表
config custom_list 'block'
    option enabled '0'
    option name 'Custom Block List'
    option description 'User-defined block list'
    list domains ''
    list urls ''
    list ips ''

config custom_list 'allow'
    option enabled '0'
    option name 'Custom Allow List'
    option description 'User-defined allow list'
    list domains ''
    list urls ''
    list ips ''

# DHCP 静态租约
config dhcp_lease 'static'
    option enabled '0'
    option name 'Server'
    option mac '00:11:22:33:44:55'
    option ip '192.168.1.100'
    option lease_time 'infinite'

# QoS 设置
config qos 'settings'
    option enabled '0'
    option upload_speed '1000'
    option download_speed '1000'
    option per_ip_limit '1'
    option limit_upload '100'
    option limit_download '500'
    option prioritize_voip '1'
    option prioritize_gaming '1'
    option prioritize_streaming '0'

# 系统健康监控
config health 'monitor'
    option enabled '1'
    option check_interval '300'
    option cpu_threshold '80'
    option memory_threshold '85'
    option disk_threshold '90'
    option temperature_threshold '80'
    option notify_on_warning '1'
    option auto_reboot '0'
    option reboot_threshold '95'

# 日志配置
config logging 'settings'
    option enabled '1'
    option level 'info'
    option destination 'file'
    option file_path '/var/log/domain.log'
    option max_size '10485760'
    option max_files '5'
    option syslog_enabled '1'
    option syslog_facility 'local4'
    option remote_logging '0'
    option remote_host ''
    option remote_port '514'
    option remote_protocol 'udp'

# 证书域名 (示例 - 将自动生成)
config certificate_domain 'example_com'
    option domain 'example.com'
    option enabled '1'
    option auto_renew '1'
    option wildcard '0'
    option staging '0'
    option last_renewed ''
    option expires ''
    option status 'valid'
    option cert_path '/etc/domain/certs/example.com/fullchain.pem'
    option key_path '/etc/domain/certs/example.com/privkey.pem'

# DNS 覆盖记录
config dns_override 'local_server'
    option domain 'server.local'
    option type 'A'
    option value '192.168.1.100'
    option ttl '60'
    option enabled '1'